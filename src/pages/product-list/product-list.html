<ion-header>
  <ion-navbar color="dark">
    <button ion-button icon-only menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title>Product List</ion-title>
    <ion-buttons end>
      <button ion-button icon-only (click)="scanEAN()">
        <ion-icon name="barcode"></ion-icon>
      </button>
    </ion-buttons>
  </ion-navbar>
</ion-header>

<ion-content class="product-list">
  <ion-searchbar class="search-bar" [(ngModel)]="searchQuery" (input)="search($event)"></ion-searchbar>
  <ion-list id="product-list-component">
    <ion-item-sliding clear *ngFor="let product of products">
      <ion-item (click)="itemTapped($event, product)">
        <ion-thumbnail item-left>
          <img src="{{product.images[3]?.url}}">
        </ion-thumbnail>
        <h2>{{product.name}}</h2>
        <h3>Price: {{product.priceInfo?.price?.formatted}}</h3>
      </ion-item>
      <ion-item-options icon-left>
          <button ion-button icon-only large padding-top padding-bottom (click)="addPicture($event, product)"><ion-icon name="camera"></ion-icon></button>
          <button ion-button icon-only large padding-top padding-bottom color="secondary" (click)="itemTapped($event, product, 'stock')"><ion-icon ios="logo-buffer" md="logo-buffer"></ion-icon></button>
      </ion-item-options>
  </ion-item-sliding>
  </ion-list>
  <ion-infinite-scroll (ionInfinite)="doInfinite($event)">
    <ion-infinite-scroll-content loadingText="Loading more data..."></ion-infinite-scroll-content>
  </ion-infinite-scroll>
</ion-content>
